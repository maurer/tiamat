language: cpp

before_install:
  - sudo sh -c "echo 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.6-binaries main' >> /etc/apt/sources.list"
  - sudo sh -c "echo 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise main' >> /etc/apt/sources.list"
  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update
install:
  - sudo apt-get install clang++-3.6 clang-3.6 llvm-3.6-dev git cmake libedit-dev
  - git clone https://github.com/kentonv/capnproto.git
  - export CC=clang-3.6
  - export CXX=clang++-3.6
  - cd capnproto/c++
  - ./setup-autotools.sh
  - autoreconf -i
  - ./configure && make -j5 && sudo make install && cd ../..

script:
  - mkdir build

script:
  - mkdir build && cd build && cmake ..
  - make
